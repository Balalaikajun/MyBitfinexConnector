# Описание задачи
1. Реализовать библиотеку со следующими
   элементами:
    1. Класс клиент для REST API биржи Bitfinex, со следующим функционалом:
        - Получение трейдов (Trades);
        - Получение свечей (Candles);
        - Получение информации о тикере (Ticker);
    2. Класс клиент для WebSocket API биржи Bitfinex, со следущим функционалом:
        - Получение трейдов (Trades);
        - Получение свечей (Candles);
    3. Класс коннектор, использующий предыдущие классы и расширяющий их функционал.
2. Покрыть библиотеку интеграционными тестами.
3. Реализовать простой UI (WPF) на основе MVVM для показа возможностей библиотеки.

# Разбор исходных элементов и внесённых изменений
По заданию был предоставлен интерфейс [ITestConnector](TestData/ITestConnector.cs).
После разбора интерфейса и API Bitfinex было найдено определённое количество мест для улучшений.
Давайте разберёмся с этими улучшениями на примере разборов итоговых контрактов библиотеки. 

## IRestClient
Получившийся [IRestClient](../TestHQ.Abstractions/Interfaces/IRestClient.cs) имеет следующие особенности:
- Метод GetNewTradesAsync был переделан в GetTradesAsync, который предоставляет почти полный функционал эндпоинта для получения трейдов.
- Была добавлена перегрузка метода GetCandleSeriesAsync, которая принимает период в виде строки.
Сделано было потому, как в работе данная версия оказалась намного удобнее, ведь API иногда само возвращает период. 
- Был добавлен метод для получения информации о тикере, требуемый в ТЗ.
- Методам были присвоены изначальные значения согласованные с API.
- Методы и параметры были переименованы для поддержания согласованности и лучшей передачи сути.
- Контракт задокументирован.

## IWebSocketClient
Получившийся [IWebSocketClient](../TestHQ.Abstractions/Interfaces/IWebSocketClient.cs) имеет следующие особенности:
- Были добавлены методы ConnectAsync и DisconnectAsync, для предоставления пользователям контроля над состоянием соединения.
- Методы отписки были переделаны в попытки отписки, для большего удобства пользования. 
- Было урезано количество параметров в методах подписки, так как API Bitfinex к сожалению не предоставляет контроля над снапшота, который мы получаем после подключении.
- Методам были присвоены изначальные значения согласованные с API.
- Методы и параметры были переименованы для поддержания согласованности и лучшей передачи сути.
- Контракт задокументирован.

## ITestConnector
Получившийся [ITestConnector](../TestHQ.Abstractions/Interfaces/ITestConnector.cs) имеет следующие особенности:
- Контракт во многом основан на двух предыдущих, и перенимает их особенности. 
По сути данный контракт создан лишь для их объединения и расширения предоставляемого функционала.
- В методах подписки были добавлены дополнительные параметры для настройки снапшота.
- Контракт задокументирован.

## Модели
Итоговые [модели](../TestHQ.Abstractions/Models) имеют следующие особенности:
- Были убраны свойства которые нельзя получить в простом сценарии как например TotalPrice у свеч.
- Некоторые свойства были переименованы для поддержания согласованности и лучшей передачи сути.
- Была добавлена модель [тикеров](../TestHQ.Abstractions/Models/Ticker.cs), согласно API.

# Недочёты
1. Как минимум в нынешней реализации [коннектор](../TestHQ.Bitfinex/Connector/BitfinexConnector.cs) мне кажется сомнительным, и лучше использовать клиенты.
Единственная польза коннектора это расширение контроля над снапшотом, за счёт подгрузки элементов из API, но сделано оно на мой взгляд сомнительно. 
Хоть оно и работает, но будто бы допускает редкие пробелы в данных. Так как сейчас оно держится на том что id трейдов идут по порядку, чему очень сложно доверять. 
Поэтому при возможности лучше использовать IWebSocketClient.
2. Тесты касающиеся Веб-сокета не покрывают его в полной мере.



